<link rel="stylesheet" href="../../node_modules/figma-plugin-ds/dist/figma-plugin-ds.css" />

<style>
    body {
        background: linear-gradient(to right, red, yellow);
    }
    
    .slider {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 50%;
        height: 60px;
        padding: 30px;
        padding-left: 40px;
        background: #fcfcfc;
        border-radius: 20px;
        display: flex;
        align-items: center;
        box-shadow: 0px 15px 40px #7e6d5766;
    }
    
    .slider p {
        font-size: 26px;
        font-weight: 600;
        font-family: Open Sans;
        padding-left: 30px;
        color: black;
    }
    
    .slider input[type="range"] {
        -webkit-appearance: none !important;
        width: 420px;
        height: 2px;
        background: black;
        border: none;
        outline: none;
    }
    
    .slider input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none !important;
        width: 30px;
        height: 30px;
        background: black;
        border: 2px solid black;
        border-radius: 50%;
        cursor: pointer;
    }
    
    .slider input[type="range"]::-webkit-slider-thumb:hover {
        background: black;
    }
    
    .column {
        border: 1px solid;
        min-height: 400px;
        max-width: 600px;
        margin: auto;
        border-radius: 10px;
    }
    
    .main {
        display: flex;
        flex-direction: column;
        margin-top: 20%;
        border-radius: 5px;
        padding: 10px;
        background-color: white;
    }
    
    .form-label {
        margin-top: 10px;
    }
    
    .heading {
        color: red;
        text-align: center;
        margin: 5% auto;
    }
    
    #image-container {
        width: 300px;
        height: 300px;
    }
    
    #image {
        width: 100%;
        height: 100%;
    }
</style>

<!-- UI -->
<div style="position: relative; display: block;">

    <div class="slider">
        <input id="range" type="range" min="0" max="300" value="0" oninput="update()" />
        <p id="rangeValue">0</p>
        <input type="color" id="colorPicker" value="#ffffff" onchange="sendColorToPlugin()" />

    </div>
    <div id="image-container">
        <img id="image" src="image.jpg">
    </div>

    <label for="color-picker">Select a color:</label>
    <input id="color-picker" type="color">

</div>
<script>
    const colorPicker = document.getElementById("color-picker");
    const image = document.getElementById("image");

    function update() {
        var isDragging = false;
        rangeInput = document.getElementById("range");
        document.getElementById('rangeValue').innerText = rangeInput.value;
        slider = document.getElementsByClassName("slider")[0];
        parent.postMessage({
            pluginMessage: {
                value: rangeInput.value,
                colorValue: image.value
            }
        }, '*');
    }

    function sendColorToPlugin() {
        var colorValue = document.getElementById('colorPicker').value;
        parent.postMessage({
            pluginMessage: {
                type: 'color-change',
                color: colorValue
            }
        }, '*');
    }
</script>